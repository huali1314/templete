{"version":3,"sources":["../../../../assets/Script/assets/Script/info.js"],"names":["global","require","cc","Class","extends","Component","properties","onLoad","registerUI","initData","start","curHp","curOxygen","curFishCollect","curSatiety","scheduleInfo","hp","node","getChildByName","getComponent","ProgressBar","oxygen","fishCollect","satiety","player","find","penguin","penguinConfig","curLevelConfig","updateHp","updateOxygen","updateFish","updateSatiety","progress","maxHp","maxOxygen","maxFish","maxSatiety","schedule","updateInfo","unScheduleInfo","unschedule","dt","isInWater","newOxygen"],"mappings":"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","file":"info.js","sourceRoot":"../../../../assets/Script","sourcesContent":["var global = require(\"./global\");\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //     // ATTRIBUTES:\n        //     default: null,        // The default value will be used only when the component attaching\n        //                           // to a node for the first time\n        //     type: cc.SpriteFrame, // optional, default is typeof default\n        //     serializable: true,   // optional, default is true\n        // },\n        // bar: {\n        //     get () {\n        //         return this._bar;\n        //     },\n        //     set (value) {\n        //         this._bar = value;\n        //     }\n        // },\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.registerUI()\n        this.initData()\n    },\n\n    start () {\n        this.curHp = 100;\n        this.curOxygen = 100;\n        this.curFishCollect = 0;\n        this.curSatiety = 100;\n        this.scheduleInfo()\n    },\n    registerUI:function(){\n        // this.scheduler = cc.director.getScheduler()\n        this.hp = this.node.getChildByName(\"hp\").getComponent(cc.ProgressBar)\n        this.oxygen = this.node.getChildByName(\"oxygen\").getComponent(cc.ProgressBar)\n        this.fishCollect = this.node.getChildByName(\"collect\").getComponent(cc.ProgressBar)\n        this.satiety = this.node.getChildByName(\"satiety\").getComponent(cc.ProgressBar)\n        this.player = cc.find(\"player\")\n        this.penguin = this.player.getComponent(\"penguinCtrl\")\n    },\n    initData:function(){\n        this.penguinConfig = require(\"penguinConfig\")\n        this.curLevelConfig = this.penguinConfig[0]\n        // this.oxygen.totalLength = this.curLevelConfig.maxOxygen\n        // this.hp.totalLength = this.curLevelConfig.maxHp\n        // this.fishCollect.totalLength = this.curLevelConfig.maxFish\n        // this.satiety.totalLength = this.curLevelConfig.maxSatiety\n        this.updateHp()\n        this.updateOxygen()\n        this.updateFish()\n        this.updateSatiety()\n    },\n    updateHp:function(){\n        this.hp.progress = this.curHp/this.curLevelConfig.maxHp\n    },\n    updateOxygen:function(){\n        this.oxygen.progress = this.curOxygen/this.curLevelConfig.maxOxygen\n    },\n    updateFish:function(){\n        this.fishCollect.progress = this.curFishCollect/this.curLevelConfig.maxFish\n    },\n    updateSatiety:function(){\n        this.satiety.progress = this.curSatiety/this.curLevelConfig.maxSatiety\n    },\n    scheduleInfo:function(){\n        this.schedule(this.updateInfo,0.1)\n    },\n    unScheduleInfo:function(){\n        this.unschedule(this.updateInfo)\n    },\n    updateInfo:function(dt){\n        var isInWater = this.penguin.isInWater()\n        var newOxygen = isInWater?(this.curOxygen - 0.1):(this.curOxygen + 0.2)\n        if(isInWater){\n            this.curOxygen = (newOxygen > 0)?newOxygen:0\n        }else{\n            this.curOxygen = (newOxygen < this.curLevelConfig.maxOxygen)?newOxygen:this.curLevelConfig.maxOxygen\n        }\n        this.updateOxygen()\n        if(this.curOxygen <= 0){\n            this.curHp -= 0.1\n            this.updateHp()\n            // this.unScheduleInfo()\n        }\n    },\n    // update (dt) {\n    //     var isInWater = this.penguin.isInWater()\n    //     var newOxygen = isInWater?(this.curOxygen - 0.1):(this.curOxygen + 0.2)\n    //     if(isInWater){\n    //         this.curOxygen = newOxygen > 0?newOxygen:0\n    //         this.updateOxygen()\n    //     }else{\n    //         this.curOxygen = newOxygen < 100?newOxygen:100\n    //         this.updateOxygen()\n    //     }\n    //     cc.log(this.curOxygen,\"=============curOxygen======\")\n    //     if(this.curOxygen <=0){\n            \n    //     }\n    // },\n});\n"]}