__require=function t(i,e,n){function o(a,c){if(!e[a]){if(!i[a]){var r=a.split("/");if(r=r[r.length-1],!i[r]){var h="function"==typeof __require&&__require;if(!c&&h)return h(r,!0);if(s)return s(r,!0);throw new Error("Cannot find module '"+a+"'")}}var u=e[a]={exports:{}};i[a][0].call(u.exports,function(t){return o(i[a][1][t]||t)},u,u.exports,t,i,e,n)}return e[a].exports}for(var s="function"==typeof __require&&__require,a=0;a<n.length;a++)o(n[a]);return o}({JoystickBG:[function(t,i,e){"use strict";cc._RF.push(i,"84103WUf/dN+73Z/djgcIPh","JoystickBG");var n=t("JoystickBar");cc.Class({extends:cc.Component,properties:{dot:{default:null,type:cc.Node,displayName:"\u6447\u6746\u8282\u70b9"},_joyCom:{default:null,displayName:"joy Node"},_playerNode:{default:null,displayName:"\u88ab\u64cd\u4f5c\u7684\u76ee\u6807Node"},_angle:{default:null,displayName:"\u5f53\u524d\u89e6\u6478\u7684\u89d2\u5ea6"},_radian:{default:null,displayName:"\u5f27\u5ea6"},_speed:0,_speed1:2,_speed2:4,_opacity:0},onLoad:function(){this.distance=0,this._joyCom=this.node.parent.getComponent("Joystick"),this._playerNode=this._joyCom.sprite,this.penguinCtrl=this._playerNode.getComponent("penguinCtrl"),this.isTouching=!1,this.canvas=cc.find("Canvas"),this.touchPanel=this.canvas.getChildByName("touchPanel"),this._joyCom.touchType==n.TouchType.DEFAULT&&this._initTouchEvent()},_initTouchEvent:function(){this.dot.on(cc.Node.EventType.TOUCH_START,this._touchDotStartEvent,this),this.dot.on(cc.Node.EventType.TOUCH_END,this._touchDotEndEvent,this),this.dot.on(cc.Node.EventType.TOUCH_CANCEL,this._touchDotEndEvent,this),this.dot._touchListener.setSwallowTouches(!1),this.node.on(cc.Node.EventType.TOUCH_START,this._touchStartEvent,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._touchMoveEvent,this),this.node.on(cc.Node.EventType.TOUCH_END,this._touchEndEvent,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._touchEndEvent,this)},_touchDotStartEvent:function(t){this.penguinCtrl.moveStart()},_touchDotEndEvent:function(t){this.penguinCtrl.moveEnd()},update:function(t){if(1==this.isTouching)switch(this._joyCom.directionType){case n.DirectionType.FOUR:this._fourDirectionsMove();break;case n.DirectionType.EIGHT:this._eightDirectionsMove();break;case n.DirectionType.ALL:this._allDirectionsMove()}},_fourDirectionsMove:function(){this._angle>45&&this._angle<135?this._playerNode.y+=this._speed:this._angle>-135&&this._angle<-45?this._playerNode.y-=this._speed:this._angle<-135&&this._angle>-180||this._angle>135&&this._angle<180?this._playerNode.x-=this._speed:(this._angle<0&&this._angle>-45||this._angle>0&&this._angle<45)&&(this._playerNode.x+=this._speed)},_eightDirectionsMove:function(){this._angle>67.5&&this._angle<112.5?this._playerNode.y+=this._speed:this._angle>-112.5&&this._angle<-67.5?this._playerNode.y-=this._speed:this._angle<-157.5&&this._angle>-180||this._angle>157.5&&this._angle<180?this._playerNode.x-=this._speed:this._angle<0&&this._angle>-22.5||this._angle>0&&this._angle<22.5?this._playerNode.x+=this._speed:this._angle>112.5&&this._angle<157.5?(this._playerNode.x-=this._speed/1.414,this._playerNode.y+=this._speed/1.414):this._angle>22.5&&this._angle<67.5?(this._playerNode.x+=this._speed/1.414,this._playerNode.y+=this._speed/1.414):this._angle>-157.5&&this._angle<-112.5?(this._playerNode.x-=this._speed/1.414,this._playerNode.y-=this._speed/1.414):this._angle>-67.5&&this._angle<-22.5&&(this._playerNode.x+=this._speed/1.414,this._playerNode.y-=this._speed/1.414)},_allDirectionsMove:function(){this.penguinCtrl.move(this._angle,this.distance)},_getDistance:function(t,i){return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))},_getRadian:function(t){return this._radian=Math.PI/180*this._getAngle(t),this._radian},_getAngle:function(t){var i=this.node.getPosition();return this._angle=Math.atan2(t.y-i.y,t.x-i.x)*(180/Math.PI),this._angle},_setSpeed:function(t){var i=this._getDistance(this.dot.getPosition(),this.node.getPosition());this.distance=i},_touchStartEvent:function(t){this.isTouching=!0;var i=this.node.convertToNodeSpaceAR(t.getLocation()),e=this._getDistance(i,cc.p(0,0)),n=this.node.width/2;this._stickPos=i;var o=this.node.getPosition().x+i.x,s=this.node.getPosition().y+i.y;return n>e&&(this.dot.setPosition(cc.p(o,s)),!0)},_touchMoveEvent:function(t){var i=this.node.convertToNodeSpaceAR(t.getLocation()),e=this._getDistance(i,cc.p(0,0)),n=this.node.width/2,o=this.node.getPosition().x+i.x,s=this.node.getPosition().y+i.y;if(n>e)this.dot.setPosition(cc.p(o,s));else{var a=this.node.getPosition().x+Math.cos(this._getRadian(cc.p(o,s)))*n,c=this.node.getPosition().y+Math.sin(this._getRadian(cc.p(o,s)))*n;this.dot.setPosition(cc.p(a,c))}this._getAngle(cc.p(o,s)),this._setSpeed(cc.p(o,s))},_touchEndEvent:function(){cc.log("_touchEndEvent======"),this.isTouching=!1;var t=this.node.getPosition();this.dot.setPosition(t),this._speed=0,this.distance=0}}),cc._RF.pop()},{JoystickBar:"JoystickBar"}],JoystickBar:[function(t,i,e){"use strict";cc._RF.push(i,"03398Ig42dLdpgaT2HG2bzY","JoystickBar"),i.exports={TouchType:cc.Enum({DEFAULT:0,FOLLOW:1}),DirectionType:cc.Enum({FOUR:4,EIGHT:8,ALL:0})},cc._RF.pop()},{}],Joystick:[function(t,i,e){"use strict";cc._RF.push(i,"0c9c5BlHN5J45imRBxTkfA5","Joystick");var n=t("JoystickBar"),o=t("JoystickBG");cc.Class({extends:cc.Component,properties:{dot:{default:null,type:cc.Node,displayName:"\u6447\u6746\u8282\u70b9"},ring:{default:null,type:o,displayName:"\u6447\u6746\u80cc\u666f\u8282\u70b9"},stickX:{default:0,displayName:"\u6447\u6746X\u4f4d\u7f6e"},stickY:{default:0,displayName:"\u6447\u6746Y\u4f4d\u7f6e"},touchType:{default:n.TouchType.DEFAULT,type:n.TouchType,displayName:"\u89e6\u6478\u7c7b\u578b"},directionType:{default:n.DirectionType.ALL,type:n.DirectionType,displayName:"\u65b9\u5411\u7c7b\u578b"},sprite:{default:null,type:cc.Node,displayName:"\u64cd\u63a7\u7684\u76ee\u6807"},_stickPos:{default:null,type:cc.Node,displayName:"\u6447\u6746\u5f53\u524d\u4f4d\u7f6e"},_touchLocation:{default:null,type:cc.Node,displayName:"\u6447\u6746\u5f53\u524d\u4f4d\u7f6e"}},onLoad:function(){this._createStickSprite(),this.touchType==n.TouchType.FOLLOW&&this._initTouchEvent()},_createStickSprite:function(){this.ring.node.setPosition(this.stickX,this.stickY),this.dot.setPosition(this.stickX,this.stickY)},_initTouchEvent:function(){this.node.on(cc.Node.EventType.TOUCH_START,this._touchStartEvent,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._touchMoveEvent,this),this.node.on(cc.Node.EventType.TOUCH_END,this._touchEndEvent,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._touchEndEvent,this)},_touchStartEvent:function(t){this._touchLocation=t.getLocation();var i=this.node.convertToNodeSpaceAR(t.getLocation());this.ring.node.setPosition(i),this.dot.setPosition(i),this._stickPos=i},_touchMoveEvent:function(t){if(this._touchLocation.x==t.getLocation().x&&this._touchLocation.y==t.getLocation().y)return!1;var i=this.ring.node.convertToNodeSpaceAR(t.getLocation()),e=this.ring._getDistance(i,cc.p(0,0)),n=this.ring.node.width/2,o=this._stickPos.x+i.x,s=this._stickPos.y+i.y;if(n>e)this.dot.setPosition(cc.p(o,s));else{var a=this._stickPos.x+Math.cos(this.ring._getRadian(cc.p(o,s)))*n,c=this._stickPos.y+Math.sin(this.ring._getRadian(cc.p(o,s)))*n;this.dot.setPosition(cc.p(a,c))}this.ring._getAngle(cc.p(o,s)),this.ring._setSpeed(cc.p(o,s))},_touchEndEvent:function(){this.dot.setPosition(this.ring.node.getPosition()),this.ring._speed=0}}),cc._RF.pop()},{JoystickBG:"JoystickBG",JoystickBar:"JoystickBar"}],camera:[function(t,i,e){"use strict";cc._RF.push(i,"76129+tzq9FIItCjvRZXVxw","camera"),cc.Class({extends:cc.Component,properties:{target:{default:null,type:cc.Node},camera:cc.Camera,anim:cc.Animation,jumpZoom:!1,centerAtStart:!1,smoothFollow:!1,followX:{default:0,visible:function(){return this.smoothFollow}},followY:{default:0,visible:function(){return this.smoothFollow}},minFollowDist:{default:0,visible:function(){return this.smoothFollow}},followRatio:{default:0,visible:function(){return this.smoothFollow}},overview:!1,overviewTargets:{default:[],type:[cc.Node],visible:function(){return this.overview}},overviewMargin:{default:0,visible:function(){return this.overview}},speedZoom:!1,zoomInSpeed:{default:0,visible:function(){return this.speedZoom}},zoomOutSpeed:{default:0,visible:function(){return this.speedZoom}},canShake:!1,shakeDuration:{default:0,visible:function(){return this.canShake}},pointerPan:!1,pointerXMult:{default:0,visible:function(){return this.pointerPan}},pointerYMult:{default:0,visible:function(){return this.pointerPan}},useBoundaries:!1,topBound:{default:0,visible:function(){return this.useBoundaries}},bottomBound:{default:0,visible:function(){return this.useBoundaries}},leftBound:{default:0,visible:function(){return this.useBoundaries}},rightBound:{default:0,visible:function(){return this.useBoundaries}}},onLoad:function(){this.startFollow=!1;var t=cc.find("Canvas").getComponent(cc.Canvas);this.visibleSize=cc.view.getVisibleSize(),this.initZoomRatio=this.camera.zoomRatio,this.centerAtStart&&(this.node.x=this.target.convertToWorldSpaceAR(cc.Vec2.ZERO).x),this.previousPos=this.node.position,this.pointerPan&&(this.overview=!1,this.speedZoom=!1,t.node.on("mousemove",this.onMouseMove,this),t.node.on("touchmove",this.onTouchMove,this),this.pointerPos=null),this.overview&&(this.jumpZoom=!1,this.speedZoom=!1),this.speedZoom&&(this.jumpZoom=!1)},onEnable:function(){cc.director.getPhysicsManager().attachDebugDrawToCamera(this.camera)},onDisable:function(){cc.director.getPhysicsManager().detachDebugDrawFromCamera(this.camera)},lateUpdate:function(t){var i;if((i=this.target.parent.convertToWorldSpaceAR(this.target.position)).x>=-1920&&i.x<=1920&&(this.node.x=this.node.parent.convertToNodeSpaceAR(i).x),i.y>=-280&&(this.node.y=this.node.parent.convertToNodeSpaceAR(i).y),this.previousPos=i,this.jumpZoom){var e=i.y/cc.winSize.height;this.camera.zoomRatio=1+.35*(.6-e)}},getOverviewTargetsMidpoint:function(){for(var t=cc.p(0,0),i=99999,e=99999,n=-99999,o=-99999,s=0;s<this.overviewTargets.length;++s){var a=this.overviewTargets[s];n=a.x>n?a.x:n,i=a.x<i?a.x:i,o=a.y>o?a.y:o,e=a.y<e?a.y:e}n+=this.overviewMargin,i-=this.overviewMargin,o+=this.overviewMargin,e-=this.overviewMargin;var c=Math.abs(n-i),r=Math.abs(o-e);t=cc.p(i+c/2,e+r/2);var h=Math.max(c/this.visibleSize.width,r/this.visibleSize.height);return this.camera.zoomRatio=1/h,t},shakeCamera:function(){this.canShake&&(this.anim.play("shake"),this.scheduleOnce(this.stopShake.bind(this),this.shakeDuration))},stopShake:function(){this.anim.stop(),this.camera.node.position=cc.p(0,0)},onMouseMove:function(t){this.pointerPos=t.getLocation()},onTouchMove:function(t){this.pointerPos=t.getLocation()}}),cc._RF.pop()},{}],"event-listener":[function(t,i,e){"use strict";cc._RF.push(i,"163fdZU9NRJHKaDXhZiEM/C","event-listener");i.exports=function(t){var i={};return t.on=function(t,e){i.hasOwnProperty(t)||(i[t]=[]),i[t].push(e)},t.fire=function(t){if(console.log("fire "+t),i.hasOwnProperty(t)){console.log("has own "+t);for(var e=i[t],n=0;n<e.length;n++){for(var o=e[n],s=[],a=1;a<arguments.length;a++)s.push(arguments[a]);o.apply(this,s)}}},t.off=function(t,e){if(console.log("off handler name = "+t),i.hasOwnProperty(t))for(var n=i[t],o=0;o<n.length;o++)n[o]===e&&n.splice(o,1)},t.destroy=function(){i={}},t},cc._RF.pop()},{}],foodConfig:[function(t,i,e){"use strict";cc._RF.push(i,"2c59eOHATlGcZrSwbjvOxo0","foodConfig");i.exports=[{maxHp:[100,110,120,130,140,150,160,170,180,190],swimRatio:6}],cc._RF.pop()},{}],foodCtrl:[function(t,i,e){"use strict";cc._RF.push(i,"bd952PrxCFI/qAjV98WLpFP","foodCtrl"),cc.Class({extends:cc.Component,properties:{food:[cc.Prefab]},onLoad:function(){this.bg=cc.find("level")},start:function(){this.intervalTime=20,this.dtTime=0},update:function(t){this.dtTime>=this.intervalTime?(this.dtTime=0,this.generatorOneFood()):this.dtTime+=t},generatorOneFood:function(){var t=this.food.length,i=Math.floor(cc.random0To1()*(t-.01)),e=cc.instantiate(this.food[i]);e.setPosition(600,-200),this.bg.addChild(e)}}),cc._RF.pop()},{}],food:[function(t,i,e){"use strict";cc._RF.push(i,"efe9fhUUlJDFqJJpgm0+XAA","food");var n=t("./global"),o=[!1,!0];cc.Class({extends:cc.Component,properties:{quickSwimSpeedRadio:{default:3,displayName:"\u52a0\u901f\u6e38\u6cf3\u65bd\u52a0\u529b\u91cf\u7cfb\u6570"},minSpeed:{default:5,displayName:"\u6700\u5c0f\u6e38\u6cf3\u65bd\u52a0\u529b\u91cf"},normalSwimSpeedRadio:{default:5,displayName:"\u6b63\u5e38\u6e38\u6cf3\u65bd\u52a0\u529b\u91cf\u7cfb\u6570"},maxHp:{default:20,displayName:"\u6700\u5927\u751f\u547d\u503c"},minSafeDistance:{default:100,displayName:"\u6700\u5c0f\u5b89\u5168\u8ddd\u79bb"},maxSafeDistance:{default:300,displayName:"\u8131\u79bb\u5371\u9669\u7684\u8ddd\u79bb"},reactionTime:{default:.5,displayName:"\u53cd\u5e94\u80fd\u529b"}},onLoad:function(){this.tempXOffset=0,this.winSize=cc.director.getWinSize(),this.player=cc.find("player"),this.bg=cc.find("level");var t=this.bg.getChildByName("water");this.waterLine=t.height/2,this.scheduler=cc.director.getScheduler(),this.hp=this.node.getChildByName("hp"),this.sp=this.node.getChildByName("sp"),this.progressBar=this.hp.getComponent(cc.ProgressBar),this.rigidBody=this.node.getComponent(cc.RigidBody),this.randDirection()},start:function(){this.initData(),this.initStatus(),this.registerEvent(),this.randomSwim(),this.schedulerCaluDistance()},registerEvent:function(){var t=this;n.eventlistener.on("penguinAttack",function(i){t.canAttack&&(t.curHp-=i,t.updateProgress())})},initData:function(){this.curHp=this.maxHp},initStatus:function(){this.canAttack=!1},update:function(t){this.Swim(),this.updateGravity()},updateGravity:function(){this.node.y>=this.waterLine?this.rigidBody.gravityScale=.9:this.rigidBody.gravityScale=.01},isInWater:function(){return!(this.node.y>=this.waterLine)},updateProgress:function(){var t=this.curHp/this.maxHp;t>0?this.progressBar.progress=t:this.node.destroy()},Swim:function(){if(this.isInWater()){var t=cc.random0To1()*this.normalSwimSpeedRadio+this.minSpeed,i=cc.random0To1()*this.normalSwimSpeedRadio+this.minSpeed;t=this.isLeft?-t:t,i=this.isUp?i:-i,t=this.isQuickSwimming?t*this.quickSwimSpeedRadio:t,i=this.isQuickSwimming?i*this.quickSwimSpeedRadio:i,this.sp.scaleX=this.isLeft?1:-1,this.rigidBody.applyForceToCenter(cc.v2(t,i),!1)}else this.isUp=!1},randDirection:function(){var t=Math.ceil(2*cc.random0To1())-1,i=Math.ceil(2*cc.random0To1())-1;this.isLeft=o[t],this.isUp=o[i]},caluDistance:function(){var t=this.node.x-this.player.x,i=this.node.y-this.player.y;return Math.abs(t)+Math.abs(i)},changeDirection:function(){this.isLeft=!(this.node.x>this.player.x),this.isUp=this.node.y>this.player.y},schedulerCaluDistance:function(){var t=this;this.scheduler.schedule(function(){var i=t.caluDistance();i<=this.minSafeDistance?(this.changeDirection(),this.isQuickSwimming=!0):i>this.maxSafeDistance&&(this.isQuickSwimming=!1)},this,.5,!1)},randomSwim:function(){var t=this;this.scheduler.schedule(function(){t.randDirection()},this,6,999,1,!1)},onBeginContact:function(t,i,e){var n=e.tag;9991==n?this.isLeft=!1:9992==n?this.isLeft=!0:9993==n&&(this.isUp=!0),"player"==e.node.group&&(this.canAttack=!0)},onStayContact:function(t,i,e){},onEndContact:function(t,i,e){"player"==e.node.group&&(this.canAttack=!1)}}),cc._RF.pop()},{"./global":"global"}],fountain:[function(t,i,e){"use strict";cc._RF.push(i,"28305wmN2FGxYPtNT4XKa6i","fountain"),cc.Class({extends:cc.Component,properties:{},start:function(){},onBeginContact:function(t,i,e){var n=e.getComponent(cc.RigidBody);cc.log(n,"=============otherRigidBody======"),n&&n.applyForceToCenter(cc.v2(0,2e4))}}),cc._RF.pop()},{}],"game-data":[function(t,i,e){"use strict";cc._RF.push(i,"077015p9PJBBKlU27fJGDkS","game-data"),Object.defineProperty(e,"__esModule",{value:!0});e.default=function(){var t={diedInfo:[],renascenceInfo:[]};return t},i.exports=e.default,cc._RF.pop()},{}],gameCtrl:[function(t,i,e){"use strict";cc._RF.push(i,"04c4aQKerxLkq0RcFCTmrUD","gameCtrl");var n=t("./event-listener"),o=t("./global");cc.Class({extends:cc.Component,onLoad:function(){cc.game.addPersistRootNode(this.node),o.eventlistener=n({}),this.physicsManager=cc.director.getPhysicsManager(),this.physicsManager.enabled=!0,this.syncData()},removeCacheData:function(){o.localDataManager.removeItem("playerData")},syncData:function(){var t=o.localDataManager.getObject("playerData");if(null==t){var i=o.playerData;o.localDataManager.setObject("playerData",i)}else o.playerData=t;var e=o.localDataManager.getObject("gameData");if(null==e){i=o.gameData;o.localDataManager.setObject("gameData",i)}else o.gameData=e},goFeed:function(){o.sceneManager.loadScene("game")}}),cc._RF.pop()},{"./event-listener":"event-listener","./global":"global"}],global:[function(t,i,e){"use strict";cc._RF.push(i,"5bbb0xxxgRPFpJJd6XFq/JY","global"),Object.defineProperty(e,"__esModule",{value:!0});var n=s(t("./data/player-data")),o=s(t("./data/game-data"));function s(t){return t&&t.__esModule?t:{default:t}}var a={};a.playerData=(0,n.default)(),a.gameData=(0,o.default)(),a.localDataManager=t("localDataManager"),a.sceneManager=t("sceneManager"),i.exports=a,e.default=a,i.exports=e.default,cc._RF.pop()},{"./data/game-data":"game-data","./data/player-data":"player-data",localDataManager:"localDataManager",sceneManager:"sceneManager"}],info:[function(t,i,e){"use strict";cc._RF.push(i,"12031vUngRATopKMBMKU8zr","info");t("./global");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.registerUI(),this.initData()},start:function(){this.curHp=100,this.curOxygen=100,this.curFishCollect=0,this.curSatiety=100,this.scheduleInfo()},registerUI:function(){this.hp=this.node.getChildByName("hp").getComponent(cc.ProgressBar),this.oxygen=this.node.getChildByName("oxygen").getComponent(cc.ProgressBar),this.fishCollect=this.node.getChildByName("collect").getComponent(cc.ProgressBar),this.satiety=this.node.getChildByName("satiety").getComponent(cc.ProgressBar),this.player=cc.find("player"),this.penguin=this.player.getComponent("penguinCtrl")},initData:function(){this.penguinConfig=t("penguinConfig"),this.curLevelConfig=this.penguinConfig[0],this.updateHp(),this.updateOxygen(),this.updateFish(),this.updateSatiety()},updateHp:function(){this.hp.progress=this.curHp/this.curLevelConfig.maxHp},updateOxygen:function(){this.oxygen.progress=this.curOxygen/this.curLevelConfig.maxOxygen},updateFish:function(){this.fishCollect.progress=this.curFishCollect/this.curLevelConfig.maxFish},updateSatiety:function(){this.satiety.progress=this.curSatiety/this.curLevelConfig.maxSatiety},scheduleInfo:function(){this.schedule(this.updateInfo,.1)},unScheduleInfo:function(){this.unschedule(this.updateInfo)},updateInfo:function(t){var i=this.penguin.isInWater(),e=i?this.curOxygen-.1:this.curOxygen+.2;this.curOxygen=i?e>0?e:0:e<this.curLevelConfig.maxOxygen?e:this.curLevelConfig.maxOxygen,this.updateOxygen(),this.curOxygen<=0&&(this.curHp-=.1,this.updateHp())}}),cc._RF.pop()},{"./global":"global",penguinConfig:"penguinConfig"}],localDataManager:[function(t,i,e){"use strict";cc._RF.push(i,"b659eFfnoJPHbgpIOJv6miy","localDataManager"),Object.defineProperty(e,"__esModule",{value:!0});var n={formatString:function(t){if("string"==typeof t)return t=(t=t.replace(/\ +/g,"")).replace(/[\r\n]/g,"")},setObject:function(t,i){cc.sys.localStorage.setItem(t,JSON.stringify(i))},getObject:function(t){var i=this.formatString(cc.sys.localStorage.getItem(t));return console.log(i,"===========item====="),null!=i&&void 0!=i&&""!=i?JSON.parse(i):null},removeItem:function(t){return cc.sys.localStorage.removeItem(t)}};e.default=n,i.exports=e.default,cc._RF.pop()},{}],naturalEnemy:[function(t,i,e){"use strict";cc._RF.push(i,"05738/0i61LFpZa0VocU8yr","naturalEnemy");t("./global");var n=[!1,!0];cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.rigidBody=this.node.getComponent(cc.RigidBody),this.scheduler=cc.director.getScheduler(),this.player=cc.find("player"),this.winSize=cc.director.getWinSize(),this.bg=cc.find("level");var t=this.bg.getChildByName("water");this.waterLine=t.height/2},start:function(){this.initStatus(),this.schedulerCaluDistance(),this.randomNormalSwim()},initStatus:function(){this.isQuickSwimming=!1},update:function(t){this.findFood?this.pursueSwim():this.normalSwim(),this.updateGravity()},updateGravity:function(){this.node.y>=this.waterLine?this.rigidBody.gravityScale=.9:this.rigidBody.gravityScale=.01},isInWater:function(){return!(this.node.y>=this.waterLine)},normalSwim:function(){var t=1e3*cc.random0To1()+1200,i=1e3*cc.random0To1()+1200;t=this.isLeft?-t:t,t=this.isQuickSwimming?t:t/4,this.isInWater()?(i=this.isUp?i:-i,i=this.isQuickSwimming?i:i/4,this.node.scaleX=this.isLeft?1:-1,this.rigidBody.applyForceToCenter(cc.v2(t,i),!1)):(this.isUp=!1,this.rigidBody.applyForceToCenter(cc.v2(t,0),!1))},pursueSwim:function(){this.isInWater()||this.isInPlane},randDirection:function(){var t=Math.ceil(2*cc.random0To1())-1,i=Math.ceil(2*cc.random0To1())-1;this.isLeft=n[t],this.isUp=n[i]},caluDistance:function(){var t=this.node.x-this.player.x,i=this.node.y-this.player.y;return Math.abs(t)+Math.abs(i)},schedulerCaluDistance:function(){var t=this;this.schedule(function(){var i=t.caluDistance();i<=300?(this.findFood=!0,this.isQuickSwimming=!0):i>500&&(this.findFood=!1,this.isQuickSwimming=!1)},.4)},randomNormalSwim:function(){var t=this;this.scheduler.schedule(function(){t.randDirection()},this,6,999,1,!1)}}),cc._RF.pop()},{"./global":"global"}],penguinConfig:[function(t,i,e){"use strict";cc._RF.push(i,"1e976d+M29Is7OA7dm/TXSp","penguinConfig");i.exports=[{maxHp:100,maxOxygen:100,maxStoredGrain:10,maxSatiety:100,initStoredGrain:10,attackPoint:10,satietyCostSpeed:1,swimRatio:6}],cc._RF.pop()},{}],penguinCtrl:[function(t,i,e){"use strict";cc._RF.push(i,"01da1Y9tyZE0rLWl8zGYGxD","penguinCtrl");var n=t("./global"),o=t("penguinConfig");cc.Class({extends:cc.Component,properties:{},onLoad:function(){var t=cc.find("level").getChildByName("water");this.rigidBody=this.node.getComponent(cc.RigidBody),this.animation=this.node.getComponent(cc.Animation),this.winSize=cc.director.getWinSize(),this.waterLine=t.height/2,this.scheduler=cc.director.getScheduler()},start:function(){this.initStatus(),this.initData()},initData:function(){this.dtTime=0,this.cacheData=n.localDataManager.getObject("playerData");var t=this.cacheData.curLevel;this.attackPoint=o[t].attackPoint,this.swimRatio=o[t].swimRatio},initStatus:function(){this.isBitten=!1,this.isSwimming=!1,this.switchAnimation("idle")},switchAnimation:function(t){var i=this.animation.currentClip;if(null!=i&&void 0!=i&&i.name==t)return null;switch(t){case"idle":this.animation.play("idle");break;case"walk":this.animation.play("walk");break;case"swim":this.animation.play("swim");break;case"jump":this.animation.play("jump")}},update:function(t){this.updateGravity()},updateGravity:function(){this.node.y>=this.waterLine?this.rigidBody.gravityScale=.6:this.rigidBody.gravityScale=.01},isInWater:function(){return!(this.node.y>=this.waterLine)},isGoLeft:function(t){return!(t>-90&&t<=90)},isGoTop:function(t){return t>0&&t<=180},moveStart:function(){},move:function(t,i){var e=Math.cos(t*(Math.PI/180))*i/2,n=Math.sin(t*(Math.PI/180))*i/2,o=e*this.swimRatio,s=n*this.swimRatio;this.isInWater()?(this.switchAnimation("swim"),this.node.rotation=90-t,this.rigidBody.applyForceToCenter(cc.v2(o,s),!0)):this.isInPlane?(this.node.rotation=0,this.switchAnimation("walk"),this.rigidBody.linearVelocity=cc.v2(e,0)):(this.rigidBody.applyForceToCenter(cc.v2(.1*o,9),!0),this.node.rotation=0),this.node.scaleX=e>0?1:-1},moveEnd:function(){this.switchAnimation("idle")},attack:function(){n.eventlistener.fire("penguinAttack",this.attackPoint),this.switchAnimation("swimAttack")},wake:function(){var t=this;this.scheduler.schedule(function(){t.isSwimming=!1},this,3,0,0,!1)},jump:function(){this.isInPlane&&!this.isInWater()&&(this.rigidBody.applyForceToCenter(cc.v2(0,5e3),!0),this.switchAnimation("jump")),this.isInPlane=!1},onBeginContact:function(t,i,e){var n=e.node.group;cc.log(i.tag,"=============tag==="),"iceStone"==n||"food"==n||("plane"==n&&1991==i.tag?(this.switchAnimation("idle"),this.isInPlane=!0):"food"==n&&this.attack())},onStayContact:function(t,i,e){},onEndContact:function(t,i,e){var n=e.node.group;"plane"==n&&1991==i.tag?this.isInPlane=!1:"food"==n&&this.switchAnimation("swim")}}),cc._RF.pop()},{"./global":"global",penguinConfig:"penguinConfig"}],"player-data":[function(t,i,e){"use strict";cc._RF.push(i,"8e0caFcWIlP7bzHzGNFpo7C","player-data"),Object.defineProperty(e,"__esModule",{value:!0});e.default=function(){var t={id:0,curState:0,curLevel:0,curSatiety:100,curOxygen:15,curStoredGrain:10,curHp:100};return t},i.exports=e.default,cc._RF.pop()},{}],sceneManager:[function(t,i,e){"use strict";cc._RF.push(i,"75bdc8HXCBNNqhP+s8NWPmD","sceneManager"),Object.defineProperty(e,"__esModule",{value:!0});var n={loadScene:function(t,i){this.callback=i,this._isLoadingScene=!0,this.currentSceneUrl=t,cc.director.loadScene(t,this.onLoadSceneFinish.bind(this))},onLoadSceneFinish:function(){this._isLoadingScene=!1,this.callback&&this.callback()}};e.default=n,i.exports=e.default,cc._RF.pop()},{}]},{},["Joystick","JoystickBG","JoystickBar","camera","foodConfig","penguinConfig","game-data","player-data","event-listener","food","foodCtrl","fountain","gameCtrl","global","info","localDataManager","naturalEnemy","penguinCtrl","sceneManager"]);